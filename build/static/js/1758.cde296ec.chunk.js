"use strict";(self.webpackChunkmodernize=self.webpackChunkmodernize||[]).push([[1758],{59156:(e,a,n)=>{n.d(a,{A:()=>h});n(65043);var t=n(96446),s=n(17392),r=n(26240),i=n(18731),l=n(85673),c=n(53968),o=n(28951),d=n(70579);const h=e=>{let{count:a,page:n,rowsPerPage:h,onPageChange:x}=e;const g=(0,r.A)();return(0,d.jsxs)(t.A,{sx:{flexShrink:0,ml:2.5},children:[(0,d.jsx)(s.A,{onClick:e=>{x(e,0)},disabled:0===n,"aria-label":"first page",children:"rtl"===g.direction?(0,d.jsx)(o.A,{}):(0,d.jsx)(i.A,{})}),(0,d.jsx)(s.A,{onClick:e=>{x(e,n-1)},disabled:0===n,"aria-label":"previous page",children:"rtl"===g.direction?(0,d.jsx)(c.A,{}):(0,d.jsx)(l.A,{})}),(0,d.jsx)(s.A,{onClick:e=>{x(e,n+1)},disabled:n>=Math.ceil(a/h)-1,"aria-label":"next page",children:"rtl"===g.direction?(0,d.jsx)(l.A,{}):(0,d.jsx)(c.A,{})}),(0,d.jsx)(s.A,{onClick:e=>{x(e,Math.max(0,Math.ceil(a/h)-1))},disabled:n>=Math.ceil(a/h)-1,"aria-label":"last page",children:"rtl"===g.direction?(0,d.jsx)(i.A,{}):(0,d.jsx)(o.A,{})})]})}},42231:(e,a,n)=>{n.d(a,{A:()=>r});n(65043);var t=n(41591),s=n(70579);const r=e=>{let{title:a,description:n,children:r}=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)(t.m,{children:[(0,s.jsx)("title",{children:a}),(0,s.jsx)("meta",{name:"description",content:n})]}),r]})}},29101:(e,a,n)=>{n.d(a,{A:()=>d});n(65043);var t=n(12110),s=n(79958),r=n(39336),i=n(26494),l=n(96446),c=n(79456),o=n(70579);const d=e=>{let{title:a,children:n,footer:d}=e;const h=(0,c.d4)((e=>e.customizer));return(0,o.jsxs)(t.A,{sx:{padding:0},elevation:h.isCardShadow?9:0,variant:h.isCardShadow?void 0:"outlined",children:[(0,o.jsx)(s.A,{title:a}),(0,o.jsx)(r.A,{}),(0,o.jsx)(i.A,{children:n}),d?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.A,{}),(0,o.jsx)(l.A,{p:3,children:d})]}):""]})}},55922:(e,a,n)=>{n.d(a,{A:()=>x});n(65043);var t=n(68903),s=n(85865),r=n(22698),i=n(88446),l=n(96446),c=n(35475);const o=n.p+"static/media/ChatBc.a9e64b961d26acf719b8.png";var d=n(14536),h=n(70579);const x=e=>{let{subtitle:a,items:n,title:x,children:g}=e;return(0,h.jsxs)(t.Ay,{container:!0,sx:{backgroundColor:"primary.light",borderRadius:e=>e.shape.borderRadius/4,p:"30px 25px 20px",marginBottom:"30px",position:"relative",overflow:"hidden"},children:[(0,h.jsxs)(t.Ay,{item:!0,xs:12,sm:6,lg:8,mb:1,children:[(0,h.jsx)(s.A,{variant:"h4",children:x}),(0,h.jsx)(s.A,{color:"textSecondary",variant:"h6",fontWeight:400,mt:.8,mb:0,children:a}),(0,h.jsx)(r.A,{separator:(0,h.jsx)(d.ABt,{size:"5",fill:"textSecondary",fillOpacity:"0.6",style:{margin:"0 5px"}}),sx:{alignItems:"center",mt:n?"10px":""},"aria-label":"breadcrumb",children:n?n.map((e=>(0,h.jsx)("div",{children:e.to?(0,h.jsx)(i.A,{underline:"none",color:"inherit",component:c.k2,to:e.to,children:e.title}):(0,h.jsx)(s.A,{color:"textPrimary",children:e.title})},e.title))):""})]}),(0,h.jsx)(t.Ay,{item:!0,xs:12,sm:6,lg:4,display:"flex",alignItems:"flex-end",children:(0,h.jsx)(l.A,{sx:{display:{xs:"none",md:"block",lg:"flex"},alignItems:"center",justifyContent:"flex-end",width:"100%"},children:g?(0,h.jsx)(l.A,{sx:{top:"0px",position:"absolute"},children:g}):(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(l.A,{sx:{top:"0px",position:"absolute"},children:(0,h.jsx)("img",{src:o,alt:o,width:"165px"})})})})})]})}},33211:(e,a,n)=>{n.d(a,{A:()=>r});var t=n(40854);const s=n.n(t)().create({baseURL:"http://localhost:4000",timeout:1e4});s.interceptors.request.use((e=>{const a=localStorage.getItem("accessToken");return a&&(e.headers.Authorization="Bearer ".concat(a)),e}),(e=>Promise.reject(e))),s.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&(localStorage.removeItem("accessToken"),window.location.href="/auth/login"),Promise.reject(e))));const r=s},65341:(e,a,n)=>{n.r(a),n.d(a,{default:()=>M});var t=n(65043),s=n(33211),r=n(73216),i=n(14194),l=n(96446),c=n(15795),o=n(11906),d=n(26227),h=n(41503),x=n(85865),g=n(29347),j=n(14536),A=n(55922),m=n(70579);const p=[{to:"/dashboard",title:"Dashboard"},{title:"Data Pelanggaran"}],u=()=>(0,m.jsx)(A.A,{title:"Data Pelanggaran",items:p});var b=n(42231),f=n(29101),v=n(63336),w=n(79650),C=n(71806),S=n(84882),k=n(28076),P=n(10039),y=n(73460),z=n(77739),I=n(17392),D=n(207),T=n(89735),B=n(59156);const R=e=>{let{pelanggaran:a,page:n,rowsPerPage:t,handleChangePage:s,handleChangeRowsPerPage:r,handleEdit:i,handleDelete:c}=e;const o=n>0?Math.max(0,(1+n)*t-a.length):0;return(0,m.jsx)(v.A,{variant:"outlined",children:(0,m.jsx)(w.A,{children:(0,m.jsxs)(C.A,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[(0,m.jsx)(S.A,{children:(0,m.jsxs)(k.A,{children:[(0,m.jsx)(P.A,{children:(0,m.jsx)(x.A,{variant:"h6",sx:{fontSize:"1rem"},children:"No"})}),(0,m.jsx)(P.A,{align:"center",children:(0,m.jsx)(x.A,{variant:"h6",sx:{fontSize:"1rem"},children:"Nama Siswa"})}),(0,m.jsx)(P.A,{align:"center",children:(0,m.jsx)(x.A,{variant:"h6",sx:{fontSize:"1rem"},children:"Jenis Kelamin"})}),(0,m.jsx)(P.A,{align:"center",children:(0,m.jsx)(x.A,{variant:"h6",sx:{fontSize:"1rem"},children:"Waktu"})}),(0,m.jsx)(P.A,{align:"center",children:(0,m.jsx)(x.A,{variant:"h6",sx:{fontSize:"1rem"},children:"Peristiwa"})}),(0,m.jsx)(P.A,{align:"center",children:(0,m.jsx)(x.A,{variant:"h6",sx:{fontSize:"1rem"},children:"Tempat"})}),(0,m.jsx)(P.A,{align:"center",children:(0,m.jsx)(x.A,{variant:"h6",sx:{fontSize:"1rem"},children:"Informan"})}),(0,m.jsx)(P.A,{align:"center",children:(0,m.jsx)(x.A,{variant:"h6",sx:{fontSize:"1rem"},children:"Bidang Bimbingan"})})]})}),(0,m.jsxs)(y.A,{children:[(t>0?a.slice(n*t,n*t+t):a).map(((e,a)=>(0,m.jsxs)(k.A,{children:[(0,m.jsx)(P.A,{children:(0,m.jsx)(x.A,{sx:{fontSize:"1rem"},children:n*t+a+1})}),(0,m.jsx)(P.A,{align:"center",children:(0,m.jsx)(x.A,{sx:{fontSize:"1rem"},children:e.nama_siswa})}),(0,m.jsx)(P.A,{align:"center",children:(0,m.jsx)(x.A,{sx:{fontSize:"1rem"},children:e.jenis_kelamin})}),(0,m.jsx)(P.A,{align:"center",children:(0,m.jsx)(x.A,{sx:{fontSize:"1rem"},children:e.waktu})}),(0,m.jsx)(P.A,{align:"center",children:(0,m.jsx)(x.A,{sx:{fontSize:"1rem"},children:e.peristiwa})}),(0,m.jsx)(P.A,{align:"center",children:(0,m.jsx)(x.A,{sx:{fontSize:"1rem"},children:e.tempat})}),(0,m.jsx)(P.A,{align:"center",children:(0,m.jsx)(x.A,{sx:{fontSize:"1rem"},children:e.informan})}),(0,m.jsx)(P.A,{align:"center",children:(0,m.jsx)(x.A,{sx:{fontSize:"1rem"},children:e.bidang_bimbingan})}),(0,m.jsx)(P.A,{children:(0,m.jsxs)(l.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:[(0,m.jsx)(z.A,{title:"Edit",placement:"bottom",children:(0,m.jsx)(I.A,{onClick:()=>i(e.id),children:(0,m.jsx)(j.r9C,{width:20})})}),(0,m.jsx)(z.A,{title:"Hapus",placement:"bottom",children:(0,m.jsx)(I.A,{onClick:()=>c(e.id),children:(0,m.jsx)(j.Eau,{width:20})})})]})})]},e.id))),o>0&&(0,m.jsx)(k.A,{style:{height:53*o},children:(0,m.jsx)(P.A,{colSpan:3})})]}),(0,m.jsx)(D.A,{children:(0,m.jsx)(k.A,{children:(0,m.jsx)(T.A,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:3,count:a.length,rowsPerPage:t,page:n,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onPageChange:s,onRowsPerPageChange:r,ActionsComponent:B.A})})})]})})})},M=()=>{const[e,a]=(0,t.useState)(0),[n,A]=(0,t.useState)(5),[p,v]=(0,t.useState)([]),[w,C]=(0,t.useState)(""),[S,k]=(0,t.useState)(""),[P,y]=(0,t.useState)(null),[z,I]=(0,t.useState)(!1),D=(0,r.Zp)();(0,t.useEffect)((()=>{(async()=>{try{const e=await s.A.get("/admin/api/pelanggaran");v(e.data.dataPelanggaran),console.log("data:",p)}catch(S){S.response&&S.response.data&&S.response.data.msg?(console.log(S.response.data),k(S.response.data.msg)):(console.error("Terjadi kesalahan:",S.message),k("Terjadi kesalahan saat memuat data"))}})()}),[]);const T=p.filter((e=>e.nama_siswa.toLowerCase().includes(w.toLowerCase()))).sort(((e,a)=>e.nama_siswa.localeCompare(a.nama_siswa))),B=()=>{I(!1)},M=e=>{let{message:a}=e;return(0,m.jsx)(i.A,{severity:"error",children:a})};return(0,m.jsxs)(b.A,{title:"Data pelanggaran",description:"Data pelanggaran",children:[(0,m.jsx)(u,{}),(0,m.jsx)(l.A,{justifyContent:"center",mb:5,children:S&&(0,m.jsx)(M,{message:S})}),(0,m.jsxs)(f.A,{title:"Data pelanggaran",children:[(0,m.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,m.jsx)(c.A,{label:"Search",variant:"outlined",value:w,onChange:e=>{C(e.target.value)},InputProps:{sx:{padding:"4px"}},sx:{flexGrow:0,marginRight:2}}),(0,m.jsx)(o.A,{variant:"contained",color:"primary",startIcon:(0,m.jsx)(j.uID,{}),onClick:()=>{D("/dashboard/admin/pelanggaran/add-pelanggaran")},children:"Tambah Pelanggaran"})]}),(0,m.jsx)(R,{pelanggaran:T,page:e,rowsPerPage:n,handleChangePage:(e,n)=>{a(n)},handleChangeRowsPerPage:e=>{A(parseInt(e.target.value,10)),a(0)},handleEdit:e=>{D("/dashboard/admin/pelanggaran/edit/".concat(e))},handleDelete:e=>{y(e),I(!0)}})]}),(0,m.jsxs)(d.A,{open:z,onClose:B,maxWidth:"sm",fullWidth:!0,children:[(0,m.jsx)(h.A,{children:(0,m.jsx)(x.A,{variant:"h5",align:"center",sx:{mt:2,mb:2},children:"Apakah Anda yakin ingin menghapus data pelanggaran?. Menghapus data pelanggaran akan menghapus data siswa yang ada dipelanggaran tersebut"})}),(0,m.jsxs)(g.A,{sx:{justifyContent:"center",mb:2},children:[(0,m.jsx)(o.A,{sx:{mr:3},variant:"outlined",color:"secondary",onClick:B,children:"Batal"}),(0,m.jsx)(o.A,{sx:{mr:3,backgroundColor:"#F48C06","&:hover":{backgroundColor:"#f7a944"}},variant:"contained",onClick:()=>(async e=>{try{await s.A.delete("/admin/api/pelanggaran/".concat(e)),v(p.filter((a=>a.id!==e))),I(!1)}catch(S){console.error("Terjadi kesalahan saat menghapus data pelanggaran:",S.message),k("Terjadi kesalahan saat menghapus data pelanggaran")}})(P),children:"Hapus"})]})]})]})}}}]);
//# sourceMappingURL=1758.cde296ec.chunk.js.map