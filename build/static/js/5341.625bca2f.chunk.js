"use strict";(self.webpackChunkmodernize=self.webpackChunkmodernize||[]).push([[5341],{65341:(e,a,n)=>{n.r(a),n.d(a,{default:()=>R});var s=n(65043),r=n(33211),t=n(73216),i=n(14194),l=n(96446),d=n(15795),c=n(11906),h=n(26227),o=n(41503),g=n(85865),x=n(29347),j=n(14536),m=n(55922),A=n(70579);const p=[{to:"/dashboard",title:"Dashboard"},{title:"Data Pelanggaran"}],u=()=>(0,A.jsx)(m.A,{title:"Data Pelanggaran",items:p});var f=n(42231),w=n(29101),S=n(63336),C=n(79650),b=n(71806),P=n(84882),v=n(28076),k=n(10039),z=n(73460),y=n(77739),D=n(17392),I=n(207),T=n(89735),_=n(59156);const E=e=>{let{pelanggaran:a,page:n,rowsPerPage:s,handleChangePage:r,handleChangeRowsPerPage:t,handleEdit:i,handleDelete:d}=e;const c=n>0?Math.max(0,(1+n)*s-a.length):0;return(0,A.jsx)(S.A,{variant:"outlined",children:(0,A.jsx)(C.A,{children:(0,A.jsxs)(b.A,{"aria-label":"custom pagination table",sx:{whiteSpace:"nowrap"},children:[(0,A.jsx)(P.A,{children:(0,A.jsxs)(v.A,{children:[(0,A.jsx)(k.A,{children:(0,A.jsx)(g.A,{variant:"h6",sx:{fontSize:"1rem"},children:"No"})}),(0,A.jsx)(k.A,{align:"center",children:(0,A.jsx)(g.A,{variant:"h6",sx:{fontSize:"1rem"},children:"Nama Siswa"})}),(0,A.jsx)(k.A,{align:"center",children:(0,A.jsx)(g.A,{variant:"h6",sx:{fontSize:"1rem"},children:"Jenis Kelamin"})}),(0,A.jsx)(k.A,{align:"center",children:(0,A.jsx)(g.A,{variant:"h6",sx:{fontSize:"1rem"},children:"Waktu"})}),(0,A.jsx)(k.A,{align:"center",children:(0,A.jsx)(g.A,{variant:"h6",sx:{fontSize:"1rem"},children:"Peristiwa"})}),(0,A.jsx)(k.A,{align:"center",children:(0,A.jsx)(g.A,{variant:"h6",sx:{fontSize:"1rem"},children:"Tempat"})}),(0,A.jsx)(k.A,{align:"center",children:(0,A.jsx)(g.A,{variant:"h6",sx:{fontSize:"1rem"},children:"Informan"})}),(0,A.jsx)(k.A,{align:"center",children:(0,A.jsx)(g.A,{variant:"h6",sx:{fontSize:"1rem"},children:"Bidang Bimbingan"})})]})}),(0,A.jsxs)(z.A,{children:[(s>0?a.slice(n*s,n*s+s):a).map(((e,a)=>(0,A.jsxs)(v.A,{children:[(0,A.jsx)(k.A,{children:(0,A.jsx)(g.A,{sx:{fontSize:"1rem"},children:n*s+a+1})}),(0,A.jsx)(k.A,{align:"center",children:(0,A.jsx)(g.A,{sx:{fontSize:"1rem"},children:e.nama_siswa})}),(0,A.jsx)(k.A,{align:"center",children:(0,A.jsx)(g.A,{sx:{fontSize:"1rem"},children:e.jenis_kelamin})}),(0,A.jsx)(k.A,{align:"center",children:(0,A.jsx)(g.A,{sx:{fontSize:"1rem"},children:e.waktu})}),(0,A.jsx)(k.A,{align:"center",children:(0,A.jsx)(g.A,{sx:{fontSize:"1rem"},children:e.peristiwa})}),(0,A.jsx)(k.A,{align:"center",children:(0,A.jsx)(g.A,{sx:{fontSize:"1rem"},children:e.tempat})}),(0,A.jsx)(k.A,{align:"center",children:(0,A.jsx)(g.A,{sx:{fontSize:"1rem"},children:e.informan})}),(0,A.jsx)(k.A,{align:"center",children:(0,A.jsx)(g.A,{sx:{fontSize:"1rem"},children:e.bidang_bimbingan})}),(0,A.jsx)(k.A,{children:(0,A.jsxs)(l.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:[(0,A.jsx)(y.A,{title:"Edit",placement:"bottom",children:(0,A.jsx)(D.A,{onClick:()=>i(e.id),children:(0,A.jsx)(j.r9C,{width:20})})}),(0,A.jsx)(y.A,{title:"Hapus",placement:"bottom",children:(0,A.jsx)(D.A,{onClick:()=>d(e.id),children:(0,A.jsx)(j.Eau,{width:20})})})]})})]},e.id))),c>0&&(0,A.jsx)(v.A,{style:{height:53*c},children:(0,A.jsx)(k.A,{colSpan:3})})]}),(0,A.jsx)(I.A,{children:(0,A.jsx)(v.A,{children:(0,A.jsx)(T.A,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:3,count:a.length,rowsPerPage:s,page:n,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onPageChange:r,onRowsPerPageChange:t,ActionsComponent:_.A})})})]})})})},R=()=>{const[e,a]=(0,s.useState)(0),[n,m]=(0,s.useState)(5),[p,S]=(0,s.useState)([]),[C,b]=(0,s.useState)(""),[P,v]=(0,s.useState)(""),[k,z]=(0,s.useState)(null),[y,D]=(0,s.useState)(!1),I=(0,t.Zp)();(0,s.useEffect)((()=>{(async()=>{try{const e=await r.A.get("/admin/api/pelanggaran");S(e.data.dataPelanggaran),console.log("data:",p)}catch(P){P.response&&P.response.data&&P.response.data.msg?(console.log(P.response.data),v(P.response.data.msg)):(console.error("Terjadi kesalahan:",P.message),v("Terjadi kesalahan saat memuat data"))}})()}),[p]);const T=p.filter((e=>e.nama_siswa.toLowerCase().includes(C.toLowerCase()))).sort(((e,a)=>e.nama_siswa.localeCompare(a.nama_siswa))),_=()=>{D(!1)},R=e=>{let{message:a}=e;return(0,A.jsx)(i.A,{severity:"error",children:a})};return(0,A.jsxs)(f.A,{title:"Data pelanggaran",description:"Data pelanggaran",children:[(0,A.jsx)(u,{}),(0,A.jsx)(l.A,{justifyContent:"center",mb:5,children:P&&(0,A.jsx)(R,{message:P})}),(0,A.jsxs)(w.A,{title:"Data pelanggaran",children:[(0,A.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,A.jsx)(d.A,{label:"Search",variant:"outlined",value:C,onChange:e=>{b(e.target.value)},InputProps:{sx:{padding:"4px"}},sx:{flexGrow:0,marginRight:2}}),(0,A.jsx)(c.A,{variant:"contained",color:"primary",startIcon:(0,A.jsx)(j.uID,{}),onClick:()=>{I("/dashboard/admin/pelanggaran/add-pelanggaran")},children:"Tambah Pelanggaran"})]}),(0,A.jsx)(E,{pelanggaran:T,page:e,rowsPerPage:n,handleChangePage:(e,n)=>{a(n)},handleChangeRowsPerPage:e=>{m(parseInt(e.target.value,10)),a(0)},handleEdit:e=>{I("/dashboard/admin/pelanggaran/edit/".concat(e))},handleDelete:e=>{z(e),D(!0)}})]}),(0,A.jsxs)(h.A,{open:y,onClose:_,maxWidth:"sm",fullWidth:!0,children:[(0,A.jsx)(o.A,{children:(0,A.jsx)(g.A,{variant:"h5",align:"center",sx:{mt:2,mb:2},children:"Apakah Anda yakin ingin menghapus data pelanggaran?. Menghapus data pelanggaran akan menghapus data siswa yang ada dipelanggaran tersebut"})}),(0,A.jsxs)(x.A,{sx:{justifyContent:"center",mb:2},children:[(0,A.jsx)(c.A,{sx:{mr:3},variant:"outlined",color:"secondary",onClick:_,children:"Batal"}),(0,A.jsx)(c.A,{sx:{mr:3,backgroundColor:"#F48C06","&:hover":{backgroundColor:"#f7a944"}},variant:"contained",onClick:()=>(async e=>{try{await r.A.delete("/admin/api/pelanggaran/".concat(e)),S(p.filter((a=>a.id!==e))),D(!1)}catch(P){console.error("Terjadi kesalahan saat menghapus data pelanggaran:",P.message),v("Terjadi kesalahan saat menghapus data pelanggaran")}})(k),children:"Hapus"})]})]})]})}}}]);
//# sourceMappingURL=5341.625bca2f.chunk.js.map